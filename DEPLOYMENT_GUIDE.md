# üöÄ Deployment Guide - AR Logo Video

Complete deployment guide for **zerobyte.web.id** (103.250.11.230)

## üìã Quick Deploy

### One-Command Installation

```bash
wget https://raw.githubusercontent.com/bayuapriansah/arlogovideo/main/install.sh
chmod +x install.sh
sudo ./install.sh
```

## üõ†Ô∏è Available Scripts

### 1. **install.sh** - Full Production Installation
Complete installation with SSL, Nginx, PM2, and MySQL
```bash
sudo bash install.sh
```

**Features:**
- ‚úÖ Installs all dependencies (Node.js, MySQL, Nginx)
- ‚úÖ Configures database
- ‚úÖ Sets up SSL certificate (Let's Encrypt)
- ‚úÖ Configures Nginx reverse proxy
- ‚úÖ Sets up PM2 for process management
- ‚úÖ Configures firewall
- ‚úÖ Production-ready setup

**Time:** ~10-15 minutes

---

### 2. **quick-install.sh** - Quick Installation (No SSL)
Fast installation for testing (HTTP only)
```bash
sudo bash quick-install.sh
```

**Features:**
- ‚úÖ Basic installation
- ‚úÖ HTTP only (no SSL)
- ‚ö†Ô∏è Not for production

**Time:** ~5 minutes

---

### 3. **update.sh** - Update Application
Updates application to latest version from GitHub
```bash
sudo bash update.sh
```

**Features:**
- ‚úÖ Creates automatic backup
- ‚úÖ Pulls latest code
- ‚úÖ Rebuilds frontend
- ‚úÖ Restarts application

---

### 4. **backup.sh** - Backup Database & Files
Creates backup of database and uploads
```bash
sudo bash backup.sh
```

**Features:**
- ‚úÖ Backs up database
- ‚úÖ Backs up uploaded files
- ‚úÖ Backs up configuration
- ‚úÖ Auto-cleanup old backups (7 days)

**Backup Location:** `/var/backups/arlogovideo/`

---

### 5. **manage.sh** - Management Menu
Interactive menu for managing the application
```bash
sudo bash manage.sh
```

**Options:**
1. Start Application
2. Stop Application
3. Restart Application
4. View Logs
5. Check Status
6. Update Application
7. Backup Database
8. View Credentials
9. Nginx Reload
10. Clean Logs

---

### 6. **uninstall.sh** - Remove Application
Completely removes the application
```bash
sudo bash uninstall.sh
```

**Warning:** This cannot be undone!

---

## üìù Step-by-Step Deployment

### Step 1: Prepare Server

**Requirements:**
- Ubuntu 20.04 or 22.04
- Root/sudo access
- Domain pointing to server IP

**Check DNS:**
```bash
nslookup zerobyte.web.id
# Should return: 103.250.11.230
```

### Step 2: Download Installation Script

```bash
# SSH into server
ssh root@103.250.11.230

# Download script
wget https://raw.githubusercontent.com/bayuapriansah/arlogovideo/main/install.sh

# Make executable
chmod +x install.sh
```

### Step 3: Run Installation

```bash
sudo ./install.sh
```

**What happens:**
1. Updates system packages
2. Installs Node.js 18.x
3. Installs MySQL
4. Installs Nginx
5. Clones repository
6. Configures environment
7. Builds React app
8. Sets up SSL certificate
9. Starts application with PM2

### Step 4: Verify Installation

```bash
# Check application status
pm2 status

# Check Nginx
systemctl status nginx

# Check MySQL
systemctl status mysql

# Test API
curl https://zerobyte.web.id/api/health
```

### Step 5: Access Your Site

- **Website:** https://zerobyte.web.id
- **Admin:** https://zerobyte.web.id/admin/login
- **Credentials:** Check terminal output or `/var/www/arlogovideo/CREDENTIALS.txt`

---

## üîê Security Checklist

After installation:

- [ ] Change admin password
- [ ] Delete CREDENTIALS.txt file
- [ ] Save credentials securely
- [ ] Configure firewall
- [ ] Enable automatic backups
- [ ] Set up monitoring

---

## üîß Configuration Files

### Backend Environment (.env)
Location: `/var/www/arlogovideo/.env`
```env
PORT=5000
DB_HOST=localhost
DB_USER=ar_admin
DB_PASSWORD=<auto-generated>
DB_NAME=ar_logo_video
JWT_SECRET=<auto-generated>
ADMIN_DEFAULT_USERNAME=admin
ADMIN_DEFAULT_PASSWORD=Admin@123
NODE_ENV=production
```

### Frontend Environment (client/.env)
Location: `/var/www/arlogovideo/client/.env`
```env
REACT_APP_API_URL=https://zerobyte.web.id/api
REACT_APP_BASE_URL=https://zerobyte.web.id
```

### Nginx Configuration
Location: `/etc/nginx/sites-available/arlogovideo`

---

## üìä Monitoring

### View Application Logs
```bash
pm2 logs ar-server
```

### View Nginx Logs
```bash
# Access logs
tail -f /var/log/nginx/access.log

# Error logs
tail -f /var/log/nginx/error.log
```

### View MySQL Logs
```bash
tail -f /var/log/mysql/error.log
```

---

## üîÑ Common Tasks

### Restart Application
```bash
pm2 restart ar-server
```

### Restart Nginx
```bash
sudo systemctl restart nginx
```

### Restart MySQL
```bash
sudo systemctl restart mysql
```

### View PM2 Status
```bash
pm2 status
pm2 monit
```

### Update SSL Certificate
```bash
sudo certbot renew
```

---

## üêõ Troubleshooting

### Application Won't Start
```bash
# Check logs
pm2 logs ar-server

# Check if port is in use
netstat -tulpn | grep 5000

# Restart
pm2 restart ar-server
```

### Nginx Error
```bash
# Test configuration
sudo nginx -t

# Check logs
sudo tail -f /var/log/nginx/error.log
```

### Database Connection Error
```bash
# Check MySQL is running
sudo systemctl status mysql

# Test connection
mysql -u ar_admin -p ar_logo_video
```

### SSL Certificate Issues
```bash
# Renew certificate
sudo certbot renew --force-renewal

# Check certificate status
sudo certbot certificates
```

---

## üì¶ Backup & Restore

### Create Backup
```bash
sudo bash backup.sh
```

### Restore Database
```bash
# Find backup
ls -lh /var/backups/arlogovideo/

# Restore
gunzip < /var/backups/arlogovideo/database_YYYYMMDD_HHMMSS.sql.gz | mysql -u root -p ar_logo_video
```

### Restore Uploads
```bash
tar -xzf /var/backups/arlogovideo/uploads_YYYYMMDD_HHMMSS.tar.gz -C /var/www/arlogovideo/
```

---

## üîÑ Updates

### Update Application
```bash
sudo bash update.sh
```

### Update System Packages
```bash
sudo apt update && sudo apt upgrade -y
```

### Update Node.js
```bash
# Check version
node -v

# Update if needed
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs
```

---

## üìû Support

### Useful Commands
```bash
# Application directory
cd /var/www/arlogovideo

# View credentials
cat /var/www/arlogovideo/CREDENTIALS.txt

# Check disk space
df -h

# Check memory
free -m

# Check CPU
top
```

### Files Location
- Application: `/var/www/arlogovideo`
- Backups: `/var/backups/arlogovideo`
- Nginx Config: `/etc/nginx/sites-available/arlogovideo`
- SSL Certificates: `/etc/letsencrypt/live/zerobyte.web.id`
- Logs: `/root/.pm2/logs/`

---

## üéØ Production Checklist

Before going live:

- [ ] DNS configured (zerobyte.web.id ‚Üí 103.250.11.230)
- [ ] SSL certificate installed and working
- [ ] Firewall configured (ports 80, 443, 22)
- [ ] Admin password changed
- [ ] Backups configured (cron job)
- [ ] Monitoring set up
- [ ] Error logging configured
- [ ] Database optimized
- [ ] Application tested on mobile
- [ ] Upload limits configured
- [ ] CORS configured properly

---

## üöÄ Performance Optimization

### Enable Nginx Caching
Edit `/etc/nginx/sites-available/arlogovideo` and add caching rules

### Optimize MySQL
```bash
sudo mysql_secure_installation
```

### Enable PM2 Cluster Mode
```bash
pm2 delete ar-server
pm2 start backend/server.js -i max --name ar-server
pm2 save
```

### Monitor Resources
```bash
pm2 monit
htop
```

---

**Your AR Logo Video application is now deployed and running at:**
üåê **https://zerobyte.web.id**

Need help? Check the troubleshooting section or review application logs.

